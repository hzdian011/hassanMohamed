{% comment %}
  {% schema %}
  {
    "name": "Products Grid",
    "blocks": [
      {
        "type": "product",
        "name": "Product Block",
        "settings": [
          {
            "type": "product",
            "id": "product",
            "label": "Select a product"
          },
          {
            "type": "range",
            "id": "pos_x",
            "label": "X Position (%)",
            "min": 0,
            "max": 100,
            "default": 50
          },
          {
            "type": "range",
            "id": "pos_y",
            "label": "Y Position (%)",
            "min": 0,
            "max": 100,
            "default": 50
          }
        ]
      }
    ],
    "max_blocks": 6
  }
  {% endschema %}

  <section class="products-section">
    <!-- Title -->
    <h2 class="section-title">Tisso vision in the wild</h2>

    <div class="products-grid">
      {% for block in section.blocks %}
        {% assign product = all_products[block.settings.product] %}
        <div class="product-card">
          <div class="image-wrapper">
            <img src="{{ product.featured_image | img_url: '500x' }}" alt="{{ product.title }}" width="" height="">

            <!-- plus button -->
            <button
              class="plus-btn"
              data-handle="{{ product.handle }}"
              style="top:{{ block.settings.pos_y }}%; left:{{ block.settings.pos_x }}%;"
            >
              {% comment %} + {% endcomment %}
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="plus-icon"
              >
                <g filter="url(#filter0_d_5_3060)">
                <circle cx="11.8571" cy="8.85714" r="7.85714" fill="#F8F8F8" fill-opacity="0.9"/>
                <path d="M12.1045 6.02985V12.0738" stroke="black" stroke-linecap="square" stroke-linejoin="round"/>
                <path d="M9.08252 9.05182H15.1265" stroke="black" stroke-linecap="square" stroke-linejoin="round"/>
                </g>
                <defs>
                <filter id="filter0_d_5_3060" x="0" y="0" width="23.7144" height="23.7143" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix"/>
                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                <feOffset dy="3"/>
                <feGaussianBlur stdDeviation="2"/>
                <feComposite in2="hardAlpha" operator="out"/>
                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/>
                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5_3060"/>
                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5_3060" result="shape"/>
                </filter>
                </defs>
              </svg>
            </button>
          </div>
        </div>
      {% endfor %}
    </div>

    <!-- Modal -->
    <div id="myModal" class="modal">
      <div class="modal-content">
        {% comment %} <span class="close">&times</span>#samah {% endcomment %}
        <span class="close">
          <svg
            width="18"
            height="18"
            viewBox="0 0 18 18"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
            class="closeFromSvg"
          >
            <path d="M5.0376 4.94354L13.5229 13.4288" stroke="black" stroke-width="1.5" stroke-linecap="square" stroke-linejoin="round"/>
            <path d="M5.0376 13.4285L13.5229 4.94325" stroke="black" stroke-width="1.5" stroke-linecap="square" stroke-linejoin="round"/>
          </svg>
        </span>

        <div class="modal-top">
          <!-- image -->
          <img id="modalImage" class="product-image" src="" alt="Product image" width="" height="">

          <!-- basic details -->
          <div class="basic-details">
            <h2 id="modalTitle"></h2>
            <p id="modalPrice"></p>
            <p id="modalDescription"></p>
          </div>
        </div>

        <!-- extra details -->
        <div class="modal-details">
          <div class="color-options">
            <label>Color</label>
            <div id="colorContainer"></div>
          </div>

          <div class="size-options">
            <label>Size</label>
            <div class="custom-dropdown">
              <button id="sizeDropdownBtn" class="dropdown-btn">
                Choose your size
                <span class="chevron">
                  <svg width="16" height="10" viewBox="0 0 16 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 2L8 8L14 2" stroke="black" stroke-width="1.5" stroke-linecap="square"/>
                  </svg>
                </span>
              </button>
              <div id="sizeDropdownList" class="dropdown-list"></div>
            </div>
          </div>
        </div>

        {% comment %} <button id="addToCartBtn">
          ADD TO CART
          <span class="addToCartBtn-icon">
              <svg width="36" height="12" viewBox="0 0 36 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1.4093 5.25L0.659302 5.25L0.659302 6.75L1.4093 6.75L1.4093 5.25ZM35.6391 6.53033C35.932 6.23744 35.932 5.76257 35.6391 5.46967L30.8661 0.696701C30.5733 0.403808 30.0984 0.403808 29.8055 0.696701C29.5126 0.989594 29.5126 1.46447 29.8055 1.75736L34.0481 6L29.8055 10.2426C29.5126 10.5355 29.5126 11.0104 29.8055 11.3033C30.0984 11.5962 30.5732 11.5962 30.8661 11.3033L35.6391 6.53033ZM1.4093 6.75L35.1088 6.75L35.1088 5.25L1.4093 5.25L1.4093 6.75Z" fill="white"/>
              </svg>
        </button> {% endcomment %}
        <button id="addToCartBtn">
          <span class="addToCartBtn-text">ADD TO CART</span>
          <span class="addToCartBtn-icon">
            <svg width="36" height="12" viewBox="0 0 36 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M1.4093 5.25L0.659302 5.25L0.659302 6.75L1.4093 6.75L1.4093 5.25ZM35.6391 6.53033C35.932 6.23744 35.932 5.76257 35.6391 5.46967L30.8661 0.696701C30.5733 0.403808 30.0984 0.403808 29.8055 0.696701C29.5126 0.989594 29.5126 1.46447 29.8055 1.75736L34.0481 6L29.8055 10.2426C29.5126 10.5355 29.5126 11.0104 29.8055 11.3033C30.0984 11.5962 30.5732 11.5962 30.8661 11.3033L35.6391 6.53033ZM1.4093 6.75L35.1088 6.75L35.1088 5.25L1.4093 5.25L1.4093 6.75Z" fill="white"/>
            </svg>
          </span>
        </button>

      </div>
    </div>
  </section>
{% endcomment %}
